# Case 3
## К письменной работе №2.
### Выполнено студентом Московского университета имени С.Ю.Витте, Аверьяновым Леонидом Евгеньевичем. 
#### Прикладная инофрматика, 1 курс.

1. Исходный код - ex3.c, ex3.h, test.c. Бинари - test, bst.so.
    Сборка проводилась с помощью файла rebuild.sh
    Его исходный код:
    ```
    #!/bin/bash
    gcc --std=c89 -fPIC ex3.c -shared -o bst.so
    gcc --std=c89 -o test test.c ./bst.so
    ./test
    ```
2.  Тестирование библиотеки проведено внутри ф-ии main файла test.c. 
    Предполагаемые значения были выведены вручную исходя из структуры дерева и работы алгоритма вывода значений каждых нод дерева. (сначала все левые и только потом шаг вправо).
    Вывод программы при работе:
    ```
    --TEST 1--
    expected output: 7 3 2 4 12 77
    actual output  : 7 3 2 4 12 77
    --TEST 2--
    expected output: 7 4 2 12 77
    actual output  : 7 4 2 12 77
    --TEST 3--
    expected output: tree is needeed to ballance
    actual output  : tree is needeed to ballance
    --TEST 4--
    expected output: NULL
    actual output  : NULL
    --TEST 5--
    expected output: 77
    actual output  : 77
    --TEST 6--
    expected output: 12 4 2 77
    actual output  : 12 4 2 77
    ```
3. В чем преимущества использования разделяемых библиотек, как создать и использовать разделяемую библиотеку. Создайте разделяемую библиотеку написанных функций.

    Разделяемая библиотека - это файл, содержащий объектные модули,
    которые  могут  одновременно  использоваться (разделяться) нес-
    колькими процессами. С точки  зрения  организации  как  обычная
    (неразделяемая),  так и разделяемая библиотеки являются архива-
    ми. Далее, однако, термины архивная библиотека или архив  будут
    использоваться только в неразделяемом случае.

    Если  при  редактировании внешних связей программы используется
    разделяемая библиотека, то библиотечные модули, соответствующие
    внешним ссылкам программы, не копируются в выполняемый  объект-
    ный  файл. Вместо этого в объектном файле создается специальная
    секция .lib, содержащая ссылки на библиотеку. Когда ОС UNIX вы-
    полняет получившийся файл, информация из этой секции  использу-
    ется для включения соответствующей библиотеки в адресное прост-
    ранство процесса.

    Тот факт, что содержимое разделяемых библиотек не копируется  в
    выполняемый файл, дает следующие преимущества:

        Экономится дисковое пространство.  

        Выполняемые файлы имеют меньший размер.  

        Экономится оперативная память.  

        За счет совместного использования несколькими процессами  одной  разделяемой библиотек уменьшается суммарный размер нужной им оперативной памяти.

        Упрощается сопровождение выполняемых файлов.

        Как было указано, содержимое разделяемой библиотеки помещается в адресное  пространство процесса на этапе выполнения. Таким образом, внесение изменений в разделяемую библиотека фактически изменяет все использующие  ее выполняемые  файлы, поскольку операционная система предоставит процессам новое содержимое  библиотеки.  После исправления ошибки в разделяемой библиотеке все процессы  автоматически  будут использовать скорректированные модули.

        Разумеется, архивные библиотеки не обладают этим  свойством:  изменения  в архиве не приводят к изменению выполняемых файлов, так как архивные модули копируется  в них  не  во время выполнения, а на этапе редактирования связей.

    Разделяемую библиотеку я сделал так:    
    `gcc --std=c89 -fPIC ex3.c -shared -o bst.so`    
    Флаг `-shared` и дает команду компилить как разделяемую библиотеку.  

    Библиотека лежит в директории с этим файлом под именем `bst.so`.